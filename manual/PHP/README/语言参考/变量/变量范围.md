## 变量范围

变量的范围即它定义的上下文背景（也就是它的生效范围）。大部分的 `PHP` 变量只有一个单独的范围。这个单独的范围跨度同样包含了 `require` 或 `include` 引入的文件。

```php
<?php

declare(strict_types = 1);

require __DIR__ . '/example.php';

var_dump($foo); // string(3) "foo"

```

example.php

```php
<?php

declare(strict_types = 1);

$foo = 'foo';

```

在用户自定义函数中，一个局部函数范围将被引入。任何用于函数内部的变量按缺省情况将被限制在局部函数范围内。

```php
<?php

declare(strict_types = 1);

$foo = 'foo';

/**
 * Just a test function.
 *
 * @param  void
 * @return void
 */
function foo()
{
    return $foo;
}

var_dump(foo()); // NULL

```

`PHP` 中全局变量在函数中使用时必须将变量声明为 `global` ：

```php
<?php

declare(strict_types = 1);

$foo = 'foo';

/**
 * Use global variables in function.
 *
 * @param  void
 * @return string
 */
function foo(): string
{
    global $foo;
    return $foo;
}

var_dump(foo()); // string(3) "foo"

```

在局部函数范围内也还可以使用 `$GLOBALS` 超全局变量：

```php
<?php

declare(strict_types = 1);

$foo = 'foo';

/**
 * Use superglobal variables in function.
 *
 * @param  void
 * @return string
 */
function foo(): string
{
    return $GLOBALS['foo'];
}

var_dump(foo()); // string(3) "foo"

```

静态变量仅在局部函数域中存在，函数第一次调用时被初始化，但当程序执行离开此作用域时，其值并不丢失。

```php
<?php

declare(strict_types = 1);

/**
 * Use static variables in function.
 *
 * @param  void
 * @return int
 */
function foo(): int
{
    static $foo = 0;
    return $foo++;
}

var_dump(foo()); // int(0)
var_dump(foo()); // int(1)
var_dump(foo()); // int(2)

```

在递归函数中使用静态变量：

```php
<?php

declare(strict_types = 1);

/**
 * Use static variables in recursive function.
 *
 * @param  void
 * @return void
 */
function foo()
{
    static $foo = 0;
    $foo++;
    if ($foo < 10) {
        foo();
    }
}

foo();

```

