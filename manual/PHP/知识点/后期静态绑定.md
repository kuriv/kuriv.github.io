## 目录

* [self:: 的用法](#self-的用法)
* [static:: 的用法](#static-的用法)
* [非静态环境下使用 static::](#非静态环境下使用-static)
* [转发和非转发调用](#转发和非转发调用)



## self:: 的用法

```php
<?php

declare(strict_types = 1);

class A
{
    /**
     * Print the class name of the current method.
     *
     * @param  void
     * @return void
     */
    public static function who()
    {
        var_dump(__CLASS__);
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return void
     */
    public static function test()
    {
        self::who();
    }
}

class B extends A
{
    /**
     * Print the class name of the current method.
     *
     * @param  void
     * @return void
     */
    public static function who()
    {
        var_dump(__CLASS__);
    }
}

B::test();

```

输出：

```
string(1) "A"
```

## static:: 的用法

```php
<?php

declare(strict_types = 1);

class A
{
    /**
     * Print the class name of the current method.
     *
     * @param  void
     * @return void
     */
    public static function who()
    {
        var_dump(__CLASS__);
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return void
     */
    public static function test()
    {
        static::who();
    }
}

class B extends A
{
    /**
     * Print the class name of the current method.
     *
     * @param  void
     * @return void
     */
    public static function who()
    {
        var_dump(__CLASS__);
    }
}

B::test();

```

输出：

```
string(1) "B"
```

## 非静态环境下使用 static::

```php
<?php

declare(strict_types = 1);

class A
{
    /**
     * Print success if the method is successfully called.
     *
     * @param  void
     * @return void
     */
    private function call()
    {
        var_dump('success');
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return void
     */
    public function test()
    {
        $this->call();
        static::call();
    }
}

class B extends A
{
}

class C extends A
{
    /**
     * Replace the original method.
     *
     * @param  void
     * @return void
     */
    private function call()
    {
    }
}

$b = new B;
$b->test();

$c = new C;
$c->test();

```

输出：

```
string(7) "success"
string(7) "success"
string(7) "success"
PHP Fatal error:  Uncaught Error: Call to private method C::call() from context 'A'.
```

## 转发和非转发调用

```php
<?php

declare(strict_types = 1);

class A
{
    /**
     * Print the class name of the current method.
     *
     * @param  void
     * @return void
     */
    public static function who()
    {
        var_dump(__CLASS__);
    }

    /**
     * Different calls for late static binding.
     *
     * @param  void
     * @return void
     */
    public static function call()
    {
        static::who();
    }
}

class B extends A
{
    /**
     * Print the class name of the current method.
     *
     * @param  void
     * @return void
     */
    public static function who()
    {
        var_dump(__CLASS__);
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return void
     */
    public static function test()
    {
        A::call();
        parent::call();
        self::call();
    }
}

class C extends B
{
    /**
     * Print the class name of the current method.
     *
     * @param  void
     * @return void
     */
    public static function who()
    {
        var_dump(__CLASS__);
    }
}

C::test();

```

输出：

```
string(1) "A"
string(1) "C"
string(1) "C"
```