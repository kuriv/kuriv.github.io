## 对象复制

* [基本语法](#基本语法)

### 基本语法

附例一：

```php
<?php

declare(strict_types = 1);

class Cat
{
    /**
     * The name of cat.
     *
     * @var string
     */
    public $name;

    /**
     * The age of cat.
     *
     * @var int
     */
    public $age;

    /**
     * Save the name and age.
     *
     * @param  string $name
     * @param  int    $age
     * @return void
     */
    public function __construct(string $name, int $age)
    {
        $this->name = $name;
        $this->age = $age;
    }
}

class Dog
{
    /**
     * The name of dog.
     *
     * @var string
     */
    public $name;

    /**
     * Store an instance of cat.
     *
     * @var Cat
     */
    public $cat;
}

$spike = new Dog;
$spike->name = 'Spike';
$spike->cat = new Cat('Tom', 6);

$tyke = clone $spike;

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }
// object(Dog)#3 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }

$tyke->name = 'Tyke';
$tyke->cat->age = 2;

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(2) } }
// object(Dog)#3 (2) { ["name"]=> string(4) "Tyke" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(2) } }

```

附例二：

```php
<?php

declare(strict_types = 1);

class Cat
{
    /**
     * The name of cat.
     *
     * @var string
     */
    public $name;

    /**
     * The age of cat.
     *
     * @var int
     */
    public $age;

    /**
     * Save the name and age.
     *
     * @param  string $name
     * @param  int    $age
     * @return void
     */
    public function __construct(string $name, int $age)
    {
        $this->name = $name;
        $this->age = $age;
    }
}

class Dog
{
    /**
     * The name of dog.
     *
     * @var string
     */
    public $name;

    /**
     * Store an instance of cat.
     *
     * @var Cat
     */
    public $cat;

    /**
     * Complete deep copy.
     *
     * @param  void
     * @return void
     */
    public function __clone()
    {
        $this->cat = clone $this->cat;
    }
}

$spike = new Dog;
$spike->name = 'Spike';
$spike->cat = new Cat('Tom', 6);

$tyke = clone $spike;

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }
// object(Dog)#3 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#4 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }

$tyke->name = 'Tyke';
$tyke->cat->age = 2;

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }
// object(Dog)#3 (2) { ["name"]=> string(4) "Tyke" ["cat"]=> object(Cat)#4 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(2) } }

```

附例三：

```php
<?php

declare(strict_types = 1);

class Cat
{
    /**
     * The name of cat.
     *
     * @var string
     */
    public $name;

    /**
     * The age of cat.
     *
     * @var int
     */
    public $age;

    /**
     * Save the name and age.
     *
     * @param  string $name
     * @param  int    $age
     * @return void
     */
    public function __construct(string $name, int $age)
    {
        $this->name = $name;
        $this->age = $age;
    }
}

class Dog
{
    /**
     * The name of dog.
     *
     * @var string
     */
    public $name;

    /**
     * Store an instance of cat.
     *
     * @var Cat
     */
    public $cat;
}

$spike = new Dog;
$spike->name = 'Spike';
$spike->cat = new Cat('Tom', 6);

$tyke = unserialize(serialize($spike));

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }
// object(Dog)#3 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#4 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }

$tyke->name = 'Tyke';
$tyke->cat->age = 2;

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }
// object(Dog)#3 (2) { ["name"]=> string(4) "Tyke" ["cat"]=> object(Cat)#4 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(2) } }

```

附例四：

```php
<?php

declare(strict_types = 1);

class Cat
{
    /**
     * The name of cat.
     *
     * @var string
     */
    public $name;

    /**
     * The age of cat.
     *
     * @var int
     */
    public $age;

    /**
     * Save the name and age.
     *
     * @param  string $name
     * @param  int    $age
     * @return void
     */
    public function __construct(string $name, int $age)
    {
        $this->name = $name;
        $this->age = $age;
    }
}

class Dog
{
    /**
     * The name of dog.
     *
     * @var string
     */
    public $name;

    /**
     * Store an instance of cat.
     *
     * @var Cat
     */
    public $cat;
}

$spike = new Dog;
$spike->name = 'Spike';
$spike->cat = new Cat('Tom', 6);

$tyke = json_decode(json_encode($spike));

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }
// object(stdClass)#3 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(stdClass)#4 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }

$tyke->name = 'Tyke';
$tyke->cat->age = 2;

var_dump($spike, $tyke);

// object(Dog)#1 (2) { ["name"]=> string(5) "Spike" ["cat"]=> object(Cat)#2 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(6) } }
// object(stdClass)#3 (2) { ["name"]=> string(4) "Tyke" ["cat"]=> object(stdClass)#4 (2) { ["name"]=> string(3) "Tom" ["age"]=> int(2) } }

```

