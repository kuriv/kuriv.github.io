## 后期静态绑定

* [基本语法](#基本语法)

### 基本语法

附例一：

```php
<?php

declare(strict_types = 1);

class Foo
{
    /**
     * Return the class name of the current method.
     *
     * @param  void
     * @return string
     */
    public static function getClass(): string
    {
        return __CLASS__;
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return string
     */
    public static function method(): string
    {
        return self::getClass();
    }
}

class Bar extends Foo
{
    /**
     * Return the class name of the current method.
     *
     * @param  void
     * @return string
     */
    public static function getClass(): string
    {
        return __CLASS__;
    }
}

var_dump(Bar::method()); // string(3) "Foo"

```

附例二：

```php
<?php

declare(strict_types = 1);

class Foo
{
    /**
     * Return the class name of the current method.
     *
     * @param  void
     * @return string
     */
    public static function getClass(): string
    {
        return __CLASS__;
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return string
     */
    public static function method(): string
    {
        return static::getClass();
    }
}

class Bar extends Foo
{
    /**
     * Return the class name of the current method.
     *
     * @param  void
     * @return string
     */
    public static function getClass(): string
    {
        return __CLASS__;
    }
}

var_dump(Bar::method()); // string(3) "Bar"

```

附例三：

```php
<?php

declare(strict_types = 1);

class Foo
{
    /**
     * Return success if the method is successfully called.
     *
     * @param  void
     * @return string
     */
    private function returnSuccess(): string
    {
        return 'success';
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return void
     */
    public function test()
    {
        var_dump($this->returnSuccess());
        var_dump(static::returnSuccess());
    }
}

class Bar extends Foo
{
}

class Baz extends Foo
{
    /**
     * Replace the parent method.
     *
     * @param  void
     * @return void
     */
    private function returnSuccess()
    {
    }
}

$bar = new Bar;
$bar->test();

// string(7) "success"
// string(7) "success"

$baz = new Baz;
$baz->test();

// string(7) "success"
// PHP Fatal error:  Uncaught Error: Call to private method Baz::printSuccess() from context 'Foo'.

```

附例四：

```php
<?php

declare(strict_types = 1);

class Foo
{
    /**
     * Return the class name of the current method.
     *
     * @param  void
     * @return string
     */
    public static function getClass(): string
    {
        return __CLASS__;
    }

    /**
     * Different calls for late static binding.
     *
     * @param  void
     * @return string
     */
    public static function method(): string
    {
        return static::getClass();
    }
}

class Bar extends Foo
{
    /**
     * Return the class name of the current method.
     *
     * @param  void
     * @return string
     */
    public static function getClass(): string
    {
        return __CLASS__;
    }

    /**
     * Just a test method.
     *
     * @param  void
     * @return void
     */
    public static function test()
    {
        var_dump(Foo::method());
        var_dump(parent::method());
        var_dump(self::method());
    }
}

class Baz extends Bar
{
    /**
     * Return the class name of the current method.
     *
     * @param  void
     * @return string
     */
    public static function getClass(): string
    {
        return __CLASS__;
    }
}

Baz::test();

// string(3) "Foo"
// string(3) "Baz"
// string(3) "Baz"

```

